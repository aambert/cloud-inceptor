#!/usr/bin/expect -f
#
# syntax: ssh_pass password host command
 
set password [lindex $argv 0]
set host     [lindex $argv 1]
set command  [lindex $argv 2]
 
spawn ssh $host $command
expect {
  # Agree to modify known_hosts if prompted
  "(yes/no)?"   { 
      send -- "yes\r"
      exp_continue 
  }
 
  # Enter the password
  "*?assword:*" { 
     send -- "$password\r"
  }
}
 
interact
